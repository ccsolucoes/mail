<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CCMail Contact Form Example</title>
</head>
<body>
  <h1>Contact</h1>

  <form id="contactForm" novalidate>
    <label>
      Name<br />
      <input name="name" required minlength="2" />
    </label><br /><br />

    <label>
      Email<br />
      <input name="email" type="email" required />
    </label><br /><br />

    <label>
      Phone (optional)<br />
      <input name="phone" />
    </label><br /><br />

    <label>
      Subject (optional)<br />
      <input name="subject" />
    </label><br /><br />

    <label>
      Message<br />
      <textarea name="message" required minlength="10" rows="6"></textarea>
    </label><br /><br />

    <!-- Honeypot: keep hidden with CSS in real projects -->
    <input name="website" style="display:none" tabindex="-1" autocomplete="off" />

    <button type="submit">Send</button>
  </form>

  <pre id="out"></pre>

  <script>
    // 1) Put your endpoint here:
    const ENDPOINT = "https://cdn.yourdomain.com/ccmail/mail-api.php";

    const form = document.getElementById("contactForm");
    const out = document.getElementById("out");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      out.textContent = "Sending...";

      const fd = new FormData(form);
      const payload = Object.fromEntries(fd.entries());

      try {
        const r = await fetch(ENDPOINT, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload),
        });
        const data = await r.json();
        out.textContent = JSON.stringify(data, null, 2);
        if (data.ok) form.reset();
      } catch (err) {
        out.textContent = String(err);
      }
    });
  </script>
</body>
</html>
